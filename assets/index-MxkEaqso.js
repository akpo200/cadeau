(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=n(e);fetch(e.href,r)}})();const i="221760258373",l="Bonjour, je souhaite commander le magazine cadeau.",d=document.querySelectorAll(".whatsapp-link"),u=document.querySelectorAll(".reveal");function m(){const t=new URLSearchParams(window.location.search);return t.get("ref")||t.get("ambassadeur")||t.get("code")}function f(){const t=m();let o=l;if(t)o+=` (Code Ambassadeur: ${t})`,sessionStorage.setItem("cadeau_ambassadeur",t);else{const e=sessionStorage.getItem("cadeau_ambassadeur");e&&(o+=` (Code Ambassadeur: ${e})`)}const n=encodeURIComponent(o),s=`https://wa.me/${i}?text=${n}`;d.forEach(e=>{e.href=s,e.target="_blank",e.rel="noopener noreferrer"})}const p={threshold:.15,rootMargin:"0px 0px -50px 0px"},g=new IntersectionObserver(t=>{t.forEach(o=>{o.isIntersecting&&o.target.classList.add("visible")})},p);u.forEach(t=>g.observe(t));window.addEventListener("DOMContentLoaded",()=>{f();const t=document.getElementById("generateBtn"),o=document.getElementById("ambassadorName"),n=document.getElementById("feedbackMsg");t&&o&&t.addEventListener("click",()=>{const e=o.value.trim().toUpperCase().replace(/[^A-Z0-9]/g,"");if(e.length<2){n.textContent="Veuillez entrer un prénom valide (min 2 lettres).",n.style.color="red";return}const a=`${window.location.origin}/?ref=${e}`;navigator.clipboard.writeText(a).then(()=>{n.textContent="✅ Lien copié ! Partagez-le partout.",n.style.color="#4CAF50";const c=t.textContent;t.textContent="COPIÉ !",setTimeout(()=>{t.textContent=c},2e3)}).catch(c=>{console.error("Erreur copie:",c),n.textContent=`Sélectionnez et copiez ce lien : ${a}`,n.style.color="#fff",o.value=a,o.select()})});const s=document.querySelector(".whatsapp-ambassador-link");if(s){const e=encodeURIComponent("Bonjour, je souhaite avoir plus d'infos sur le programme Ambassadeur CADEAU.");s.href=`https://wa.me/${i}?text=${e}`,s.target="_blank"}console.log("Cadeau App Initialized")});
